–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è "bacula"

¬´It comes in the night and sucks the essence from your computers¬ª. Kern
Sibbald

# –û–±–∑–æ—Ä

## –û—Ç–∑—ã–≤—ã

–û —Å–∏—Å—Ç–µ–º–µ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –º–Ω–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤:

  -
    –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞,
    –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞,
    –≤–æ–∑–º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –Ω—É–ª—è (bare metal, –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
    –∞—Ç—Ä–∏–±—É—Ç—ã —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π RAID)
    –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

–ò–∑ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤:

  -
    –ø–ª–æ—Ö–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç —Ä–µ–∑–∫–∏–µ —Å–º–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏,
    –ø–ª–æ—Ö–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–∏—Å–∫–æ–º (–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –¥–∏—Å–∫, –≥–ª—é–∫–∏
    —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —Ç–æ–º–∞ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ñ–∞–π–ª–∞),
    –º–Ω–æ–≥–æ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã (—Ç–∞–º-–∂–µ: –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é
    –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ).

–∏—Å—Ç–æ—á–Ω–∏–∫: [Bog BOS](http://bog.pp.ru/work/bacula.html)

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

[–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](http://www.bacula.org/5.0.x-manuals/en/main/main/img7.png).

–ó–¥–µ—Å—å:

  -
    Bacula Director
    (<span style="background-color: rgb(222, 203, 182);">bacula-dir</span>):
    —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –¥–µ–º–æ–Ω
    Bacula Console
    (<span style="background-color: rgb(221, 185, 192);">bconsole</span>):
    –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–∞ –º–∞—à–∏–Ω–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
    Bacula File
    (<span style="background-color: rgb(201, 210, 223);">bacula-fd</span>):
    —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –¥–µ–º–æ–Ω –±–µ–∫–∞–ø–∞ (–Ω–∞ –º–∞—à–∏–Ω–µ —Å –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ
    –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
    Bacula Storage
    (<span style="background-color: rgb(221, 222, 182);">bacula-sd</span>):
    —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    Catalog: –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—
    (<span style="background-color: rgb(207, 233, 224);">MySQL, PgSQL,
    SQlite</span>)
    Bacula Monitor: –º–æ–Ω–∏—Ç–æ—Ä
    (<span style="background-color: rgb(221, 185, 192);">–∑–Ω–∞—á–æ–∫ –≤
    —Ç—Ä–µ–µ</span>)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

  - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞
    [www.bacula.org](http://www.bacula.org/en/?page=documentation).
  - –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –µ—Å—Ç—å –Ω–∞
    [www.opennet.ru](http://www.opennet.ru/opennews/art.shtml?num=7385).
  - –°—Ç–∞—Ç—å—è –Ω–∞
    [ibm.com](http://www.ibm.com/developerworks/ru/library/l-Backup_4/).
  - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ [Bog BOS](http://bog.pp.ru/work/bacula.html).

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç—å—è: [Bacula/–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](Bacula_–ë—ã—Å—Ç—Ä—ã–π_—Å—Ç–∞—Ä—Ç "wikilink")

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ç–æ–ª—å–∫–æ –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è "—Ä–∞–±–æ—Ç–∞–µ—Ç".

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

# Pools, Volumes and Labels

–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç—å—è: [Bacula/Pools, Volumes and
Labels](Bacula_Pools,_Volumes_and_Labels "wikilink")

–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—É–ª–æ–≤, —Ç–æ–º–æ–≤ –∏ –º–µ—Ç–æ–∫.

# –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π

–¢–µ–ø–µ—Ä—å, –Ω–∞ –∏–º–µ—é—â–µ–º—Å—è –º–∞—Ç–µ—Ä–∏–∞–ª–µ, –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
—Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

  - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–∏–µ –±–µ–∫–∞–ø—ã –Ω–∞ –∫–∞–∫–∏–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏ –ø–∏—Å–∞—Ç—å (–≤ —Å–ª—É—á–∞–µ
    —Ñ–∞–π–ª–æ–≤: –≤–∏–Ω—á–µ—Å—Ç–µ—Ä—ã –∏ —Ä–∞–∑–¥–µ–ª—ã)
  - –∫–∞–∫–∏–µ –ø—É–ª—ã –ø—Ä–∏ —ç—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
  - –∏ –æ–ø–∏—Å–∞—Ç—å —ç—Ç–æ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏–≤ –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º
    —Ñ–∞–π–ª–∞–º.

[Bacula/–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π](Bacula_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_–Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π "wikilink")

## –í—ã–Ω–æ—Å —á–∞—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

Bacula
[FAQ](http://wiki.bacula.org/doku.php?id=faq#can_bacula-dirconf_include_others_files):

Yes, the Director configuration doesn't have to be in just one file. You
can do this:

    @/path/to/file1
    @/path/to/file2

In fact, the @filename can appear anywhere within the conf file where a
token would be read, and the contents of the named file will be
logically inserted in the place of the @filename. What must be in the
file depends on the location the @filename is specified in the conf
file.

    #
    # Include subfiles associated with configuration of clients.
    # They define the bulk of the Clients, Jobs, and FileSets.
    # Remember to "reload" the Director after adding a client file.
    #
    @|"sh -c 'for f in /etc/bacula/clientdefs/*.conf¬†; do echo @${f}¬†; done'"

<http://wiki.bacula.org/doku.php?id=sample_configs>

<http://www.bacula.org/5.0.x-manuals/en/main/main/Customizing_Configuration_F.html#SECTION001723000000000000000>

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ fd —Å –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ fd –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∏
–ø–æ–ª—É—á–∏—Ç—å —Å –Ω–µ–≥–æ –ª—é–±—ã–µ —Ñ–∞–π–ª—ã. –ü–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –ø–æ–º–∏–º–æ
–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∏—Ö –ø–∞—Ä–æ–ª–µ–π —Å–ª–µ–¥—É–µ—Ç –æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –∏ –¥—Ä—É–≥–∏–º–∏
–∞—Å–ø–µ–∫—Ç–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

  -
    –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∞–¥—Ä–µ—Å–∞ —Å –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è.
    –ó–∞–∫—Ä—ã—Ç—å –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä–æ–º.
    –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª:
    [–ø—Ä–∏–º–µ—Ä](http://www.bog.pp.ru/work/bacula.html#TLSexample).

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ fd:

1.  –í –∫–æ–Ω—Ñ–∏–≥–µ fd –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é:
      - –£–∫–∞–∑—ã–≤–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—É.
2.  –í –∫–æ–Ω—Ñ–∏–≥–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–∏–º fd (—ç—Ç–æ –º–æ–∂–Ω–æ
    –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, —á—Ç–æ –±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å –æ–±—â–∏–π –∫–æ–Ω—Ñ–∏–≥
    –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞):
      - –û–ø–∏—Å—ã–≤–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞ (fd), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è.
      - –û–ø–∏—Å—ã–≤–∞–µ–º –ø—É–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
      - –ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º —á—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å (fileset) (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
      - –û–ø–∏—Å—ã–≤–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (schedule) (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
      - –û–ø–∏—Å—ã–≤–∞–µ–º –∑–∞–¥–∞–Ω–∏–µ (job), –≤–∫–ª—é—á–∞—è –≤ –Ω–µ–≥–æ —Å–µ–∫—Ü–∏–∏:
          - client
          - pool
          - fileset
          - schedule
          - *—á–∞—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ —Å–µ–∫—Ü–∏—é JobDefs*

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Ç–æ–º –∂–µ
–∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –≤ –∫–∞—Ç–∞–ª–æ–≥ —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
–≤ –∑–∞–¥–∞–Ω–∏–∏ (job) –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

# –±–µ–∫–∞–ø MySQL –±–∞–∑—ã

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å—Ç—å –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—
(—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∞–∑—ã –±–∞–∫—É–ª—ã), –Ω–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —á–∞—â–µ –±—É–¥—É—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è
—Å–ª—É—á–∞–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –º–∞—à–∏–Ω. –ü—Ä–∏ —ç—Ç–æ–º –º–æ–∂–Ω–æ –∫–∞–∫
–≤—ã–ø–æ–ª–Ω—è—Ç—å mysqldump –ª–æ–∫–∞–ª—å–Ω–æ, –æ–±—Ä–∞—â–∞—è—Å—å –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–π –±–∞–∑–µ, —Ç–∞–∫ –∏
–≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –º–∞—à–∏–Ω–µ —Å –°–£–ë–î, –∑–∞–±–∏—Ä–∞—è –∑–∞—Ç–µ–º —Ñ–∞–π–ª
–æ—Ç—Ç—É–¥–∞. –î–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ª—É—á–∞—è –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–∏–≤—ã:

    ClientRunBeforeJob = /path/to/script/create.dump
    ClientRunAfterJob  = /path/to/script/remove.dump

–°–º. —Ç–∞–∫–∂–µ:

  - <http://sozinov.blogspot.com/2008/05/bacula-backup-mysql.html>
  - –¢–∞–∫-–∂–µ, –≤
    /usr/share/doc/bacula-common-\[version\]/examples/database/ –¥–ª—è
    —ç—Ç–æ–≥–æ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä—ã.

[Category:Bacula](Category:Bacula "wikilink")